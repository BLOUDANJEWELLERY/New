<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pro QR Generator</title>
<script src="https://cdn.jsdelivr.net/npm/qr-code-styling@1.6.0/lib/qr-code-styling.js"></script>

<style>
  body {
    background: #020617;
    color: white;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  .box {
    background: #0f172a;
    padding: 20px;
    border-radius: 14px;
    width: 360px;
  }
  input, select, button {
    width: 100%;
    margin-bottom: 10px;
    padding: 10px;
    border-radius: 6px;
    border: none;
  }
  button {
    background: #2563eb;
    color: white;
    cursor: pointer;
  }
  #qr {
    margin-top: 15px;
    display: flex;
    justify-content: center;
  }
</style>
</head>

<body>
<div class="box">
  <h3>QR Code Generator</h3>

  <input id="text" placeholder="Enter text or URL" />

  <label>QR Color</label>
  <input type="color" id="qrColor" value="#000000" />

  <label>Background Color</label>
  <input type="color" id="bgColor" value="#ffffff" />

  <label>Dot Style</label>
  <select id="dotStyle">
    <option value="square">Square</option>
    <option value="dots">Dots</option>
    <option value="rounded">Rounded</option>
    <option value="classy">Classy</option>
    <option value="classy-rounded">Classy Rounded</option>
  </select>

  <label>Center Logo</label>
  <input type="file" id="logo" accept="image/*" />

  <button onclick="updateQR()">Generate</button>
  <button onclick="downloadQR()">Download PNG</button>

  <div id="qr"></div>
</div>

<script>
const qrCode = new QRCodeStyling({
  width: 260,
  height: 260,
  data: "",
  image: "",
  dotsOptions: {
    color: "#000000",
    type: "square"
  },
  backgroundOptions: {
    color: "#ffffff"
  },
  imageOptions: {
    crossOrigin: "anonymous",
    margin: 6,
    imageSize: 0.22   // AUTO logo resize (safe zone)
  },
  qrOptions: {
    errorCorrectionLevel: "H"
  }
});

qrCode.append(document.getElementById("qr"));

function updateQR() {
  const text = document.getElementById("text").value;
  const color = document.getElementById("qrColor").value;
  const bg = document.getElementById("bgColor").value;
  const dots = document.getElementById("dotStyle").value;
  const logoFile = document.getElementById("logo").files[0];

  if (!text) return;

  qrCode.update({
    data: text,
    dotsOptions: {
      color: color,
      type: dots
    },
    backgroundOptions: {
      color: bg
    },
    image: logoFile ? URL.createObjectURL(logoFile) : ""
  });
}

function downloadQR() {
  qrCode.download({
    name: "qr-code",
    extension: "png"
  });
}
</script>
</body>
</html>